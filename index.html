<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="google" content="notranslate" />
  <meta property="og:locale" content="ko_KR" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="(ì£¼)ëŒ€í•œìƒì‚¬ 02-2617-9654" />
  <meta property="og:description" content="ë„ìê¸°,ìœ ë¦¬,ì¡í™”,ë½ì•¤ë½,ì½”ë§¥ìŠ¤,ì—…ì†Œìš© ì„œìš¸Â·ê²½ê¸° ì´íŒ" />
  <title>(ì£¼)ëŒ€í•œìƒì‚¬</title>

  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.7/kakao.min.js"
    integrity="sha384-tJkjbtDbvoxO+diRuDtwRO9JXR7pjWnfjfRn5ePUpl7e7RJCxKCwwnfqUAdXh53p"
    crossorigin="anonymous"></script>
  <script>
    try {
      if (window.Kakao && !Kakao.isInitialized()) Kakao.init("61e60e2a10a44ac8e3201db62542c480");
    } catch(e) {}
  </script>

  <style>
    :root{
      --bg:#ffffff;
      --card:#ffffff;
      --border:#e5e7eb;
      --text:#0f172a;
      --muted:#6b7280;
      --shadow:0 18px 60px rgba(0,0,0,.10);
      --radius:28px;
      --btn-radius:18px;
      --maxw:560px;
      --accent:#0b1220;
      --soft:#f9fafb;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR","Apple SD Gothic Neo",sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    .wrap{
      min-height:100svh;
      display:grid;
      place-items:center;
      padding:22px;
    }

    .card{
      width:min(var(--maxw),100%);
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:22px 20px 18px;
      text-align:center;
    }

    .brand img{
      max-width:180px;
      width:100%;
      height:auto;
      margin:6px auto 2px;
      display:block;
    }

    .title{
      margin:6px 0 2px;
      font-size:28px;
      font-weight:900;
      letter-spacing:-0.02em;
    }

    .subtitle{
      margin:0 0 16px;
      font-size:13px;
      color:var(--muted);
      font-weight:800;
      line-height:1.35;
    }

    .actions{ display:grid; gap:12px; }

    .btn{
      width:100%;
      height:56px;
      border-radius:var(--btn-radius);
      border:1px solid var(--border);
      background:#fff;
      font-size:16px;
      font-weight:800 !important;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      cursor:pointer;
      text-decoration:none;
      color:inherit;
      -webkit-tap-highlight-color:transparent;
      font: inherit;
    }
    .btn span{ font-weight:inherit !important; }
    .btn:active{ transform:translateY(1px); }

    .btn.primary{
      border:none;
      color:#fff;
      background:linear-gradient(180deg,var(--accent) 0%,#020617 100%);
    }

    .ico{ width:18px; height:18px; flex:0 0 auto; }

    .app-hint{
      margin:6px 0 2px;
      font-size:12px;
      color:#6b7280;
      line-height:1.45;
      text-align:center;
    }

    .divider{
      margin:14px 0 10px;
      height:1px;
      background:var(--border);
    }

    .info{
      font-size:14px;
      text-align:left;
    }

    .row{
      display:flex;
      justify-content:space-between;
      gap:16px;
      padding:8px 0;
    }

    .key{
      color:var(--muted);
      font-weight:800;
      min-width:56px;
    }

    .val{
      font-weight:900;
      text-align:right;
      word-break:keep-all;
    }
    .val a{ color:inherit; text-decoration:underline; text-underline-offset:3px; }

    .footer{
      margin-top:10px;
      font-size:11px;
      color:#9ca3af;
      text-align:center;
    }

    /* Modal */
    .modal{ position:fixed; inset:0; display:none; z-index:50; }
    .modal.show{ display:block; }
    .modal-bg{ position:absolute; inset:0; background:rgba(2,6,23,.55); }
    .modal-box{
      position:absolute;
      left:50%;
      bottom:16px;
      transform:translateX(-50%);
      width:min(var(--maxw),calc(100% - 24px));
      background:#fff;
      border-radius:22px;
      padding:16px;
      border:1px solid var(--border);
      box-shadow:0 18px 60px rgba(0,0,0,.18);
      text-align:left;
    }
    .modal-box h3{
      margin:0 0 12px;
      font-size:16px;
      font-weight:900;
    }

    .btns{ display:grid; gap:10px; }
    .btns .btn{
      height:54px;
      border-radius:16px;
      background:var(--soft);
      font-weight:700 !important;
    }
    .btns button.btn{ font: inherit; font-weight:700 !important; }
    .btns .btn span{ font-weight:inherit !important; }

    .logo{ width:26px; height:26px; object-fit:contain; }

    /* Contact QR block */
    .qr-wrap{
      display:grid;
      gap:10px;
      justify-items:center;
      padding:6px 0 2px;
    }
    .qr-img{
      width:min(240px, 70vw);
      height:auto;
      border-radius:14px;
      border:1px solid var(--border);
      background:#fff;
      padding:10px;
    }
    .qr-hint{
      margin:0;
      font-size:12px;
      color:#374151;
      line-height:1.45;
      font-weight:800;
      text-align:center;
    }
    .qr-hint b{ font-weight:900; }

    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%);
      background:#111827;
      color:#fff;
      padding:10px 16px;
      border-radius:999px;
      font-size:13px;
      opacity:0;
      pointer-events:none;
      transition:opacity .2s ease;
    }
    .toast.show{ opacity:1; }

    /* âœ… ì˜ì—… ì•ˆë‚´: ë„í˜• ì—†ì´ í…ìŠ¤íŠ¸ë§Œ */
    .hours-block{
      margin: 6px 0 14px;
      text-align:center;
      display:grid;
      gap:10px;
    }

    .hours-line{
      display:grid;
      gap:4px;
    }

    .hours-label{
      font-size:12px;
      color:var(--muted);
      font-weight:900;
      letter-spacing:-0.01em;
    }

    .hours-value{
      font-size:14px;
      color:var(--text);
      font-weight:800;
    }

    /* âœ… ì˜ì—…ì¤‘ ë°°ì§€(ì‘ì€ ë²„íŠ¼ ëŠë‚Œ) */
    .open-badge{
      justify-self:center;
      margin-top:2px;
      padding:7px 12px;
      border-radius:999px;
      border:1px solid var(--border);
      font-size:12px;
      font-weight:900;
      line-height:1;
      background:#fff;
    }

    .open-badge.open{ border-color:#86efac; }
    .open-badge.closed{ border-color:#fecaca; }
  </style>
</head>

<body>
  <main class="wrap">
    <section class="card" aria-label="(ì£¼)ëŒ€í•œìƒì‚¬ ì•ˆë‚´">
      <div class="brand">
        <img src="https://kitchenware-ko.github.io/info/300x.png" alt="DAEHAN CORPORATION ë¡œê³ " />
      </div>

      <div class="title">(ì£¼)ëŒ€í•œìƒì‚¬</div>
      <div class="subtitle">ë„ìê¸°,ìœ ë¦¬,ì¡í™”,ë½ì•¤ë½,ì½”ë§¥ìŠ¤,ì—…ì†Œìš© ì„œìš¸Â·ê²½ê¸° ì´íŒ</div>

      <!-- âœ… ì˜ì—… ì•ˆë‚´(ë„í˜• ì—†ì´ í…ìŠ¤íŠ¸ë§Œ) -->
      <div class="hours-block" aria-label="ì˜ì—… ì•ˆë‚´">
        <div class="hours-line">
          <span class="hours-label">ì˜ì—…ì‹œê°„</span>
          <span class="hours-value">ì˜¤ì „ 8:00 ~ ì˜¤í›„ 6:00 / ê³µíœ´ì¼ì€ ì˜¤í›„ 4:00</span>
        </div>

        <div class="hours-line">
          <span class="hours-label">íœ´ë¬´ì¼</span>
          <span class="hours-value">í† ìš”ì¼, ì¼ìš”ì¼</span>
        </div>

        <!-- âœ… ì˜ì—…ì¤‘/íœ´ë¬´ ë°°ì§€ -->
        <div class="open-badge" id="openBadge" aria-live="polite">ìƒíƒœ í™•ì¸ì¤‘â€¦</div>
      </div>

      <div class="actions">
        <button class="btn" id="openContact" type="button">
          <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          ì—°ë½ì²˜ ì €ì¥
        </button>

        <button class="btn" id="copyBtn" type="button">
          <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
          </svg>
          ê³„ì¢Œë²ˆí˜¸ ë³µì‚¬
        </button>

        <button class="btn" id="openNav" type="button">
          <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 0 1 18 0Z"/><circle cx="12" cy="10" r="3"/>
          </svg>
          ì˜¤ì‹œëŠ” ê¸¸
        </button>

        <a class="btn" href="biz-guide.html">
          <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/><path d="M8 13h8"/><path d="M8 17h6"/>
          </svg>
          ì‚¬ì—…ì ë“±ë¡ ë°©ë²•
        </a>

        <a class="btn" href="order-guide.html">
          <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2 2h3l2.4 12.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6L23 6H6"/>
          </svg>
          ì˜¨ë¼ì¸ ì£¼ë¬¸ ë°©ë²•
        </a>

        <a class="btn" href="https://www.daehancorporation.co.kr/shop/" target="_blank" rel="noopener">
          <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M3 10.5 12 3l9 7.5"/><path d="M5 10v10h14V10"/>
          </svg>
          ì‡¼í•‘ëª° ë°”ë¡œê°€ê¸°
        </a>

        <button class="btn" id="appBtn" type="button">
          <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="6" y="2" width="12" height="20" rx="3"/><path d="M11 18h2"/>
          </svg>
          ì•± ì—´ê¸°
        </button>

        <p class="app-hint">
          ì¹´ì¹´ì˜¤í†¡ì—ì„œ ì•±/ë¬¸ì/ë‚´ë¹„ê°€ ë°”ë¡œ ì—´ë¦¬ì§€ ì•Šìœ¼ë©´<br>
          ìš°ì¸¡ ìƒë‹¨ <b>â‹¯</b> â†’ <b>ê¸°ë³¸ ë¸Œë¼ìš°ì €ë¡œ ì—´ê¸°</b>ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.
        </p>
      </div>

      <div class="divider" aria-hidden="true"></div>

      <div class="info" aria-label="ì—°ë½ì²˜ ì •ë³´">
        <div class="row"><div class="key">ì „í™”</div><div class="val"><a href="tel:0226179654">02-2617-9654</a></div></div>
        <div class="row"><div class="key">íŒ©ìŠ¤</div><div class="val"><a href="tel:0226859659">02-2685-9659</a></div></div>
        <div class="row"><div class="key">ì´ë©”ì¼</div><div class="val"><a href="mailto:daehan5211@naver.com">daehan5211@naver.com</a></div></div>
        <div class="row"><div class="key">ì£¼ì†Œ</div><div class="val">ê²½ê¸°ë„ ê´‘ëª…ì‹œ ì‚¬ë“¤ë¡œ 45-6</div></div>
      </div>

      <div class="footer">ê°ì‚¬í•©ë‹ˆë‹¤</div>
    </section>
  </main>

  <div class="modal" id="contactModal" aria-hidden="true">
    <div class="modal-bg" id="closeContact"></div>
    <div class="modal-box" role="dialog" aria-modal="true" aria-label="ì—°ë½ì²˜ ì €ì¥">
      <h3>ì—°ë½ì²˜ ì €ì¥</h3>
      <div class="qr-wrap">
        <img class="qr-img" src="./contact_qr.png" alt="(ì£¼)ëŒ€í•œìƒì‚¬ ì—°ë½ì²˜ QR" loading="lazy" decoding="async" />
        <p class="qr-hint">ì¹´ë©”ë¼ë¡œ QRì„ ìŠ¤ìº”í•˜ë©´ <b>ì—°ë½ì²˜ ì¶”ê°€</b> í™”ë©´ì´ ëœ¹ë‹ˆë‹¤.</p>
        <p class="qr-hint">ì•„ì´í°: <b>QR í™”ë©´ ìŠ¤í¬ë¦°ìƒ· â†’ ì‚¬ì§„ ì•±</b>ì—ì„œ ë°”ë¡œ ì¸ì‹ ê°€ëŠ¥</p>
        <p class="qr-hint">â€» ì¸ì‹ì´ ì•ˆ ë˜ë©´ ì¹´ë©”ë¼ ì•±ì—ì„œ ëœ¨ëŠ” ë§í¬(ì—°ë½ì²˜ ì¶”ê°€)ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
      </div>
    </div>
  </div>

  <div class="modal" id="navModal" aria-hidden="true">
    <div class="modal-bg" id="closeNav"></div>
    <div class="modal-box" role="dialog" aria-modal="true" aria-label="ì˜¤ì‹œëŠ” ê¸¸ ì„ íƒ">
      <h3>ì˜¤ì‹œëŠ” ê¸¸</h3>
      <div class="btns" role="list">
        <a class="btn" role="listitem" href="https://tmap.life/0b2a1271" target="_blank" rel="noopener">
          <img class="logo" src="https://kitchenware-ko.github.io/info/tmap.png" alt="í‹°ë§µ ë¡œê³ " loading="lazy" decoding="async" />
          <span>í‹°ë§µ</span>
        </a>

        <button class="btn" role="listitem" id="kakaoBtn" type="button">
          <img class="logo" src="https://kitchenware-ko.github.io/info/kakaomap.png" alt="ì¹´ì¹´ì˜¤ë‚´ë¹„ ë¡œê³ " loading="lazy" decoding="async" />
          <span>ì¹´ì¹´ì˜¤ë‚´ë¹„</span>
        </button>

        <a class="btn" role="listitem" href="https://naver.me/5L7TWyLK" target="_blank" rel="noopener">
          <img class="logo" src="https://kitchenware-ko.github.io/info/navermap.png" alt="ë„¤ì´ë²„ì§€ë„ ë¡œê³ " loading="lazy" decoding="async" />
          <span>ë„¤ì´ë²„ì§€ë„</span>
        </a>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤</div>

  <script>
    // ===== ê³„ì¢Œ ë³µì‚¬ =====
    const acct = "êµ­ë¯¼ì€í–‰ 662601-04-035762\n(ì£¼)ëŒ€í•œìƒì‚¬";
    const toast = document.getElementById("toast");

    function showToast(msg){
      toast.textContent = msg || "ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤";
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"), 1400);
    }

    async function copyText(text){
      try {
        if (navigator.clipboard && window.isSecureContext) {
          await navigator.clipboard.writeText(text);
        } else {
          const ta = document.createElement("textarea");
          ta.value = text;
          ta.style.position="fixed";
          ta.style.top="-9999px";
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          document.body.removeChild(ta);
        }
        return true;
      } catch(e) { return false; }
    }

    document.getElementById("copyBtn").addEventListener("click", async () => {
      const ok = await copyText(acct);
      if(ok) showToast("ê³„ì¢Œë²ˆí˜¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤");
      else alert("ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ê¸¸ê²Œ ëˆŒëŸ¬ ë³µì‚¬í•´ì£¼ì„¸ìš”.");
    });

    // ===== ì—°ë½ì²˜(QR) ëª¨ë‹¬ =====
    const contactModal = document.getElementById("contactModal");
    document.getElementById("openContact").addEventListener("click", () => {
      contactModal.classList.add("show");
      contactModal.setAttribute("aria-hidden", "false");
    });
    document.getElementById("closeContact").addEventListener("click", () => {
      contactModal.classList.remove("show");
      contactModal.setAttribute("aria-hidden", "true");
    });

    // ===== ì˜¤ì‹œëŠ” ê¸¸ ëª¨ë‹¬ =====
    const navModal = document.getElementById("navModal");
    document.getElementById("openNav").addEventListener("click", () => {
      navModal.classList.add("show");
      navModal.setAttribute("aria-hidden", "false");
    });
    document.getElementById("closeNav").addEventListener("click", () => {
      navModal.classList.remove("show");
      navModal.setAttribute("aria-hidden", "true");
    });

    // ===== ì¹´ì¹´ì˜¤ë‚´ë¹„ SDK ì‹¤í–‰ + í´ë°± (700ms) =====
    const KAKAO_FALLBACK = "https://map.kakao.com/link/search/%EA%B2%BD%EA%B8%B0%EB%8F%84%20%EA%B4%91%EB%AA%85%EC%8B%9C%20%EC%82%AC%EB%93%A4%EB%A1%9C%2045-6";
    document.getElementById("kakaoBtn").addEventListener("click", () => {
      try {
        if (!window.Kakao) throw new Error("Kakao SDK not loaded");
        if (!Kakao.isInitialized()) Kakao.init("61e60e2a10a44ac8e3201db62542c480");

        Kakao.Navi.start({
          name: "(ì£¼)ëŒ€í•œìƒì‚¬",
          x: 126.842331500265,
          y: 37.435743278515,
          coordType: "wgs84"
        });

        setTimeout(() => {
          if (document.visibilityState === "visible") window.location.href = KAKAO_FALLBACK;
        }, 700);
      } catch (e) {
        window.location.href = KAKAO_FALLBACK;
      }
    });

    // ===== ì•± ì—´ê¸° (Android intent â†’ ìŠ¤í† ì–´ í´ë°± 700ms) =====
    const PLAY_URL = "https://play.google.com/store/apps/details?id=com.daehan.b2cmall";
    const PACKAGE = "com.daehan.b2cmall";
    const ANDROID_INTENT = "intent://open#Intent;package=" + PACKAGE + ";S.browser_fallback_url=" + encodeURIComponent(PLAY_URL) + ";end";
    const MARKET_URL = "market://details?id=" + PACKAGE;

    function isAndroid(){ return /Android/i.test(navigator.userAgent); }

    document.getElementById("appBtn").addEventListener("click", () => {
      if (isAndroid()) {
        window.location.href = ANDROID_INTENT;

        setTimeout(() => {
          if (document.visibilityState === "visible") {
            window.location.href = MARKET_URL;
            setTimeout(() => window.location.href = PLAY_URL, 600);
          }
        }, 700);
      } else {
        window.location.href = PLAY_URL;
      }
    });

    // =========================
   // =========================
// =========================
// âœ… ì˜ì—…ì¤‘/íœ´ë¬´ ë°°ì§€ + êµ¬ê¸€ì‹œíŠ¸ ì˜ˆì™¸ (Apps Script JSONP - ì•ˆì •íŒ)
// =========================
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzL7CJ5K0aLyzzI1gq9dj5i-sIaHNfdxEwIw9zLfRCsrnb2yV-kVnAWYIdHUJLQWVj1xQ/exec";

// localStorage ìºì‹œ(ì²´ê° ì†ë„ ê°œì„ )
const OV_CACHE_KEY = "daehan_override_cache_v3";

function loadOverrideCache(){
  try { return JSON.parse(localStorage.getItem(OV_CACHE_KEY) || "null"); }
  catch(e){ return null; }
}
function saveOverrideCache(obj){
  try { localStorage.setItem(OV_CACHE_KEY, JSON.stringify(obj)); } catch(e){}
}

// âœ… JSONP ë¡œë“œ(ì•ˆì •íŒ): ëŠë¦¬ê²Œ ë„ì°©í•´ë„ ReferenceError ì•ˆ ë‚˜ê²Œ ì²˜ë¦¬
function loadOverridesJSONP(timeoutMs = 7000){
  return new Promise((resolve) => {
    const cbName = "__ov_cb_" + Math.random().toString(36).slice(2);
    const script = document.createElement("script");
    let done = false;

    function finish(result){
      if(done) return;
      done = true;

      // âœ… ëŠ¦ê²Œ ë„ì°©í•œ JSONPê°€ í˜¸ì¶œí•´ë„ ì—ëŸ¬ ì•ˆ ë‚˜ê²Œ noopìœ¼ë¡œ ìœ ì§€
      window[cbName] = function(){};

      if(script && script.parentNode) script.parentNode.removeChild(script);
      resolve(Array.isArray(result) ? result : []);

      // 30ì´ˆ í›„ ì •ë¦¬(ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€)
      setTimeout(() => { try { delete window[cbName]; } catch(e){} }, 30000);
    }

    window[cbName] = (data) => finish(data);

    const timer = setTimeout(() => finish([]), timeoutMs);

    script.async = true;
    script.src = SCRIPT_URL + "?callback=" + encodeURIComponent(cbName) + "&ts=" + Date.now();
    script.onerror = () => finish([]);

    document.head.appendChild(script);

    // finishê°€ í˜¸ì¶œë˜ë©´ timer ì •ë¦¬ë˜ê²Œ ë˜í•‘
    const _finish = finish;
    finish = (result) => { clearTimeout(timer); _finish(result); };
  });
}

function getSeoulNowParts(){
  const parts = new Intl.DateTimeFormat("en-US", {
    timeZone: "Asia/Seoul",
    weekday: "short",
    hour: "2-digit",
    minute: "2-digit",
    hour12: false,
  }).formatToParts(new Date());

  const map = Object.fromEntries(parts.map(p => [p.type, p.value]));
  return {
    weekday: map.weekday,
    hour: Number(map.hour),
    minute: Number(map.minute),
  };
}

function getSeoulYYYYMMDD(){
  return new Intl.DateTimeFormat("en-CA", {
    timeZone:"Asia/Seoul",
    year:"numeric", month:"2-digit", day:"2-digit"
  }).format(new Date());
}

function hhmmToMins(hhmm){
  const [h,m] = (hhmm||"").split(":").map(Number);
  if(Number.isFinite(h) && Number.isFinite(m)) return h*60 + m;
  return null;
}

function applyBadge(isOpen, msg){
  const el = document.getElementById("openBadge");
  if(!el) return;
  el.textContent = msg;
  el.classList.toggle("open", isOpen);
  el.classList.toggle("closed", !isOpen);
}

function applyOverride(ov){
  const { hour, minute } = getSeoulNowParts();
  const mins = hour*60 + minute;

  if(ov.status === "closed"){
    applyBadge(false, `ğŸ”´ ì˜¤ëŠ˜ì€ íœ´ë¬´${ov.note ? " Â· " + ov.note : ""}`);
    return;
  }
  if(ov.status === "open"){
    applyBadge(true, `ğŸŸ¢ í˜„ì¬ ì˜ì—…ì¤‘${ov.note ? " Â· " + ov.note : ""}`);
    return;
  }
  if(ov.status === "short"){
    const o = hhmmToMins(ov.open);
    const c = hhmmToMins(ov.close);
    if(o != null && c != null){
      const isOpen = mins >= o && mins < c;
      const msg = isOpen
        ? `ğŸŸ¢ í˜„ì¬ ì˜ì—…ì¤‘ (${ov.open}~${ov.close})${ov.note ? " Â· " + ov.note : ""}`
        : `ğŸ”´ ì˜ì—…ì‹œê°„ ì™¸ (${ov.open}~${ov.close})${ov.note ? " Â· " + ov.note : ""}`;
      applyBadge(isOpen, msg);
    } else {
      applyBadge(false, `ğŸ”´ ìš´ì˜ì •ë³´ í™•ì¸ í•„ìš”${ov.note ? " Â· " + ov.note : ""}`);
    }
  }
}

async function updateOpenBadge(){
  const { weekday, hour, minute } = getSeoulNowParts();
  const mins = hour*60 + minute;

  // 1) ê¸°ë³¸ ê·œì¹™ ì¦‰ì‹œ í‘œì‹œ
  const isWeekend = (weekday === "Sat" || weekday === "Sun");
  const baseOpen = !isWeekend && mins >= (8*60) && mins < (18*60);
  const baseMsg = baseOpen
    ? "ğŸŸ¢ í˜„ì¬ ì˜ì—…ì¤‘ (í‰ì¼ 08:00~18:00)"
    : (isWeekend ? "ğŸ”´ ì˜¤ëŠ˜ì€ íœ´ë¬´ (í† Â·ì¼)" : "ğŸ”´ ì˜ì—…ì‹œê°„ ì™¸");
  applyBadge(baseOpen, baseMsg);

  const today = getSeoulYYYYMMDD();

  // 2) ìºì‹œê°€ ìˆìœ¼ë©´ ì¦‰ì‹œ ë®ì–´ì“°ê¸°
  const cached = loadOverrideCache();
  if(cached && cached.date === today && cached.ov){
    applyOverride(cached.ov);
  }

  // 3) ì‹œíŠ¸ ì˜ˆì™¸ ë¡œë“œ (ì‹¤íŒ¨í•´ë„ ê¸°ë³¸ ë°°ì§€ëŠ” ìœ ì§€)
  const overrides = await loadOverridesJSONP(7000);

  // ë°©ì–´ì ìœ¼ë¡œ ì •ë¦¬
  const ov = overrides.find(o => String(o.date||"").trim() === today);
  if(!ov) return;

  const clean = {
    date: String(ov.date||"").trim(),
    status: String(ov.status||"").trim().toLowerCase(),
    open: String(ov.open||"").trim(),
    close: String(ov.close||"").trim(),
    note: String(ov.note||"").trim(),
  };

  applyOverride(clean);
  saveOverrideCache({ date: today, ov: clean, savedAt: Date.now() });
}

updateOpenBadge();
setInterval(updateOpenBadge, 60 * 1000);

  </script>
</body>
</html>
